<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png"><link rel="icon" href="/img/icon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Tianyu Xiong"><meta name="keywords" content=""><meta name="description" content="本文记录了一套基于 Hexo + Fluid 的现代化博客构建方案。核心亮点：采用 Git Submodule 管理主题依赖，实现非侵入式定制；利用 GitHub 作为存储层，Cloudflare Pages 作为分发层，实现全球边缘加速与高可用部署。"><meta property="og:type" content="article"><meta property="og:title" content="基于 Fluid 的高可用 Hexo 博客实践"><meta property="og:url" content="https://codebearjourney.top/tutorials/hexo-fluid-guide"><meta property="og:site_name" content="CodeBear"><meta property="og:description" content="本文记录了一套基于 Hexo + Fluid 的现代化博客构建方案。核心亮点：采用 Git Submodule 管理主题依赖，实现非侵入式定制；利用 GitHub 作为存储层，Cloudflare Pages 作为分发层，实现全球边缘加速与高可用部署。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/tianyuxbear/images/blog/hexo-fluid-guide.png"><meta property="article:published_time" content="2025-12-24T07:52:10.000Z"><meta property="article:modified_time" content="2025-12-24T17:22:27.655Z"><meta property="article:author" content="Tianyu Xiong"><meta property="article:tag" content="CI&#x2F;CD"><meta property="article:tag" content="Fluid"><meta property="article:tag" content="Hexo"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/tianyuxbear/images/blog/hexo-fluid-guide.png"><title>基于 Fluid 的高可用 Hexo 博客实践 - CodeBear</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/mac.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"codebearjourney.top",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"❡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:3},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"zdtOuB4uHIOlVEeIxryvMnlP-gzGzoHsz",app_key:"IE8HWyBK4Q51jbhKCq55dYt4",server_url:"https://zdtoub4u.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 8.1.1"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>CodeBear&#39;s blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/peace.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="基于 Fluid 的高可用 Hexo 博客实践"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-12-24 15:52" pubdate>2025年12月24日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 6.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 54 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="配置指南" id="heading-16e9743a47f81e20a7a122bd3347af5b" role="tab" data-toggle="collapse" href="#collapse-16e9743a47f81e20a7a122bd3347af5b" aria-expanded="true">配置指南 <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-16e9743a47f81e20a7a122bd3347af5b" role="tabpanel" aria-labelledby="heading-16e9743a47f81e20a7a122bd3347af5b"><div class="category-post-list"></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="博客搭建" id="heading-5015cfdc68085d8b3157455484121939" role="tab" data-toggle="collapse" href="#collapse-5015cfdc68085d8b3157455484121939" aria-expanded="true">博客搭建 <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-5015cfdc68085d8b3157455484121939" role="tabpanel" aria-labelledby="heading-5015cfdc68085d8b3157455484121939"><div class="category-post-list"><a href="/tutorials/hexo-fluid-guide" title="基于 Fluid 的高可用 Hexo 博客实践" class="list-group-item list-group-item-action active"><span class="category-post">基于 Fluid 的高可用 Hexo 博客实践</span></a></div></div></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">基于 Fluid 的高可用 Hexo 博客实践</h1><p id="updated-time" class="note note-info">本文最后更新于 2025年12月25日 凌晨</p><div class="markdown-body"><p>谨以此文纪念本站的诞生。<br>本站架构遵循<strong>计算与存储分离</strong>原则：基于 Hexo + Fluid 构建静态资源，源码托管于 GitHub，利用 Cloudflare Pages 与 Vercel 实现多线路全球分发。</p><h1 id="1-核心架构设计"><a href="#1-核心架构设计" class="headerlink" title="1. 核心架构设计"></a>1. 核心架构设计</h1><p>在开始动工前，明确本博客的工程拓扑：</p><ul><li><strong>核心仓库 (hexo-blog)</strong>: 仅包含站点配置 (<code>_config.yml</code>)、文章源码 (<code>source/</code>) 和依赖描述 (<code>package.json</code>)。</li><li><strong>主题管理 (Submodule)</strong>: 将 Fluid 主题作为子模块引入，确保主题更新与个性化配置解耦。</li><li><strong>部署策略 (Edge Computing)</strong>: 放弃传统的 GitHub Pages 直连，利用 Cloudflare 的 Anycast 网络实现毫秒级加载。</li></ul><h1 id="2-环境初始化"><a href="#2-环境初始化" class="headerlink" title="2. 环境初始化"></a>2. 环境初始化</h1><h2 id="基础依赖"><a href="#基础依赖" class="headerlink" title="基础依赖"></a>基础依赖</h2><p>请确保本地开发环境（Windows&#x2F;Mac&#x2F;Linux）已安装以下工具链：</p><ul><li><strong>Git</strong>: 版本控制核心。</li><li><strong>Node.js</strong>: 建议安装 LTS 版本 (推荐 v18+)。</li><li><strong>Hexo CLI</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure></li></ul><h2 id="仓库构建"><a href="#仓库构建" class="headerlink" title="仓库构建"></a>仓库构建</h2><p>本博客在本地建立项目 <code>Devhub/hexo-blog</code>。为了保持仓库整洁，不直接 clone 整个主题代码，而是采用初始化生成：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 初始化脚手架</span><br>hexo init hexo-blog<br><span class="hljs-built_in">cd</span> hexo-blog<br>npm install<br></code></pre></td></tr></table></figure><p>此时目录结构应清晰如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.<br>├── _config.landscape.yml<br>├── _config.yml      # 站点全局配置<br>├── package.json     # 依赖管理<br>├── scaffolds        # 模板文件<br>│   ├── draft.md<br>│   ├── page.md<br>│   └── post.md<br>├── source           # 博客文章与自定义资源<br>│   └── _posts<br>│       └── hello-world.md<br>└── themes           # 主题目录<br></code></pre></td></tr></table></figure><div class="note note-info"><p><strong>Git 策略提示</strong> 建议在 <code>.gitignore</code> 中排除 <code>node_modules</code> 和 <code>public</code> 目录。<code>package-lock.json</code> 建议保留以锁定依赖版本，确保多端构建一致性，但如果你追求极致的仓库轻量化，确保 <code>package.json</code> 版本号写死即可。</p></div><h1 id="3-主题管理：Fluid-的非侵入式集成"><a href="#3-主题管理：Fluid-的非侵入式集成" class="headerlink" title="3. 主题管理：Fluid 的非侵入式集成"></a>3. 主题管理：Fluid 的非侵入式集成</h1><p>为了解决“直接下载主题包难以更新”和“修改源码导致冲突”的痛点，我们采用 <strong>Git Submodule</strong> 方案。</p><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 移除默认主题（可选）</span><br><span class="hljs-built_in">rm</span> -rf themes/landscape<br><br><span class="hljs-comment"># 将 Fluid 挂载为子模块</span><br>git submodule add https://github.com/fluid-dev/hexo-theme-fluid.git themes/fluid<br></code></pre></td></tr></table></figure><h2 id="配置解耦-Shadow-Config"><a href="#配置解耦-Shadow-Config" class="headerlink" title="配置解耦 (Shadow Config)"></a>配置解耦 (Shadow Config)</h2><p>Fluid 支持“影子配置”模式。我们将主题的配置文件复制到根目录，并重命名为 <code>_config.fluid.yml</code>。Hexo 会优先读取此文件，从而覆盖 <code>themes/fluid/_config.yml</code> 中的默认值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> themes/fluid/_config.yml _config.fluid.yml<br></code></pre></td></tr></table></figure><p>之后所有对主题的修改（导航栏、颜色、功能开关）均在根目录的 <code>_config.fluid.yml</code> 中进行，<strong>永远不要修改 themes&#x2F;fluid 目录下的文件</strong>。</p><h2 id="站点基础配置"><a href="#站点基础配置" class="headerlink" title="站点基础配置"></a>站点基础配置</h2><p>修改 <code>hexo-blog/_config.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Extensions</span><br><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br><span class="hljs-attr">timezone:</span> <span class="hljs-string">Asia/Shanghai</span><br><br><span class="hljs-comment"># URL (Cloudflare Pages 提供的域名或自定义域名)</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">https://codebearjourney.top</span><br></code></pre></td></tr></table></figure><h1 id="4-深度定制与美化"><a href="#4-深度定制与美化" class="headerlink" title="4. 深度定制与美化"></a>4. 深度定制与美化</h1><h2 id="Mac-Style-代码高亮"><a href="#Mac-Style-代码高亮" class="headerlink" title="Mac-Style 代码高亮"></a>Mac-Style 代码高亮</h2><p>Fluid 支持自定义 CSS 注入。为了实现类似 Mac 窗口的圆角与红绿灯效果，我们采用<strong>外部注入</strong>的方式。</p><ol><li><strong>配置 Highlight.js：</strong> 在 <code>_config.fluid.yml</code> 中设置：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 实现高亮的库，对应下面的设置</span><br><span class="hljs-comment"># Highlight library</span><br><span class="hljs-comment"># Options: highlightjs | prismjs</span><br><span class="hljs-attr">lib:</span> <span class="hljs-string">&quot;highlightjs&quot;</span><br><br><span class="hljs-attr">highlightjs:</span><br>  <span class="hljs-comment"># 在链接中挑选 style 填入</span><br>  <span class="hljs-comment"># Select a style in the link</span><br>  <span class="hljs-comment"># See: https://highlightjs.org/demo/</span><br>  <span class="hljs-attr">style:</span> <span class="hljs-string">&quot;atom-one-dark&quot;</span><br>  <span class="hljs-attr">style_dark:</span> <span class="hljs-string">&quot;atom-one-dark&quot;</span><br>  <span class="hljs-attr">bg_color:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><ol start="2"><li><strong>创建样式文件：</strong> 新建 <code>source/css/mac.styl</code>，粘贴以下内容：</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.highlight</span><br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#282C34</span>   <span class="hljs-comment">/* Atom One Dark 背景色 */</span><br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span><br>    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">30px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">4</span>)<br>    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">30px</span><br><br>    <span class="hljs-selector-pseudo">&amp;::before</span><br>      <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27; &#x27;</span><br>      <span class="hljs-attribute">position</span>: absolute<br>      <span class="hljs-attribute">top</span>: <span class="hljs-number">15px</span><br>      <span class="hljs-attribute">left</span>: <span class="hljs-number">15px</span><br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span><br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span><br>      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span><br>      <span class="hljs-attribute">background</span>: <span class="hljs-number">#fc625d</span><br>      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span> <span class="hljs-number">#fdbc40</span>, <span class="hljs-number">40px</span> <span class="hljs-number">0</span> <span class="hljs-number">#35cd4b</span><br></code></pre></td></tr></table></figure><ol start="3"><li><strong>注入配置：</strong> 在 <code>_config.fluid.yml</code> 中注册：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">custom_css:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/css/mac.css</span><br></code></pre></td></tr></table></figure><p><em>注意：虽然源文件是 stylus，Hexo 会自动编译为 css，此处引用需写 .css 后缀。</em></p><h2 id="数学公式渲染-LaTeX"><a href="#数学公式渲染-LaTeX" class="headerlink" title="数学公式渲染 (LaTeX)"></a>数学公式渲染 (LaTeX)</h2><p>为了在技术文章中优雅地展示公式，使用 <code>hexo-math</code>。</p><p>安装<code>hexo-math</code>插件:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 npm 安装 Hexo-math插件</span><br><span class="hljs-comment">## Docs: https://github.com/hexojs/hexo-math</span><br>npm install hexo-math --save<br></code></pre></td></tr></table></figure><p>在站点 <code>_config.yml</code> 中添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Hexo-math</span><br><span class="hljs-comment">## Docs: https://github.com/hexojs/hexo-math</span><br><span class="hljs-attr">math:</span><br>  <span class="hljs-attr">katex:</span><br>    <span class="hljs-attr">css:</span> <span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css&#x27;</span><br>    <span class="hljs-attr">options:</span><br>      <span class="hljs-attr">throwOnError:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">mathjax:</span><br>    <span class="hljs-attr">css:</span> <span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css&#x27;</span><br>    <span class="hljs-attr">options:</span><br>      <span class="hljs-attr">conversion:</span><br>        <span class="hljs-attr">display:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-attr">tex:</span><br>      <span class="hljs-attr">svg:</span><br></code></pre></td></tr></table></figure><p><em>优化建议：默认对所有页面关闭公式渲染（提升加载速度），仅在需要的文章 Front-matter 中开启(参见后文 Front-matter 部分)</em></p><h1 id="5-内容生产流"><a href="#5-内容生产流" class="headerlink" title="5. 内容生产流"></a>5. 内容生产流</h1><h2 id="Front-matter-模板工程化"><a href="#Front-matter-模板工程化" class="headerlink" title="Front-matter 模板工程化"></a>Front-matter 模板工程化</h2><p>修改 <code>scaffolds/post.md</code>，预设常用的元数据，减少重复劳动：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> &#123;&#123; <span class="hljs-string">title</span> &#125;&#125;<br><span class="hljs-attr">date:</span> &#123;&#123; <span class="hljs-string">date</span> &#125;&#125;<br><span class="hljs-attr">updated:</span><br><span class="hljs-attr">index_img:</span><br><span class="hljs-attr">category_bar:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">categories:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Foo</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Bar</span><br><span class="hljs-attr">tags:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Foo</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Bar</span><br><span class="hljs-attr">katex:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">mathjax:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">excerpt:</span> <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-attr">sticky:</span> <br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br></code></pre></td></tr></table></figure><h2 id="静态资源压缩"><a href="#静态资源压缩" class="headerlink" title="静态资源压缩"></a>静态资源压缩</h2><p>在构建流水线中加入压缩环节，减少传输体积。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 npm 安装 hexo-all-minifier 插件</span><br><span class="hljs-comment">## Docs: https://github.com/chenzhutian/hexo-all-minifier</span><br>npm install hexo-all-minifier --save<br></code></pre></td></tr></table></figure><p>在 <code>_config.yml</code> 开启:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># All in one. Minifier &amp; Optimization plugin for Hexo.</span><br><span class="hljs-comment">## Docs: https://github.com/chenzhutian/hexo-all-minifier</span><br><span class="hljs-attr">all_minifier:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h1 id="6-高可用部署架构"><a href="#6-高可用部署架构" class="headerlink" title="6. 高可用部署架构"></a>6. 高可用部署架构</h1><p>本站采用 <strong>双线热备</strong> 方案。GitHub 仅作为代码仓库，由 Cloudflare Pages 和 Vercel 负责分发。</p><pre><code class="mermaid">graph LR
    User(用户访问) --&gt; DNS&#123;Cloudflare DNS&#125;
    DNS -- &quot;线路优选 (默认)&quot; --&gt; CF[Cloudflare Pages]
    DNS -- &quot;故障切换 (备用)&quot; --&gt; Vercel[Vercel]
    CF -- &quot;自动拉取&quot; --&gt; GH[(GitHub Repo)]
    Vercel -- &quot;自动拉取&quot; --&gt; GH
</code></pre><h2 id="6-1-部署到-GitHub-Pages-基础"><a href="#6-1-部署到-GitHub-Pages-基础" class="headerlink" title="6.1 部署到 GitHub Pages (基础)"></a>6.1 部署到 GitHub Pages (基础)</h2><p>这是最经典的部署方式，通过 Git 钩子将生成的静态文件推送到 GitHub 仓库。哪怕后续使用 CDN 加速，保留原始的 GitHub Pages 也是极好的“源站”备份。</p><ol><li><strong>创建仓库：</strong> 在 GitHub 上创建一个名为 <code>tianyuxbear.github.io</code> 的公开仓库。</li><li><strong>安装部署插件：</strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 npm 安装 Github Deploy插件</span><br>npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><ol start="3"><li><strong>配置站点文件：</strong> 修改 <code>_config.yml</code> 中的部署模块：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Deployment</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:tianyuxbear/tianyuxbear.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><ol start="4"><li><strong>一键部署</strong>： 执行以下组合命令，完成清除缓存、生成静态文件、推送部署：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d<br></code></pre></td></tr></table></figure><h2 id="6-2-部署至-Cloudflare-Pages-核心"><a href="#6-2-部署至-Cloudflare-Pages-核心" class="headerlink" title="6.2 部署至 Cloudflare Pages (核心)"></a>6.2 部署至 Cloudflare Pages (核心)</h2><p>相比 GitHub Pages，Cloudflare 提供国内更友好的 CDN 节点和 HTTP&#x2F;3 支持。</p><ol><li><strong>绑定仓库：</strong> 在 Cloudflare Dashboard 中关联 GitHub 账号，选择 <code>hexo-blog</code> 仓库。</li><li><strong>构建配置：</strong><ul><li>Build Command: 空</li><li>Build Output Directory: 空(默认是&#x2F;)</li></ul></li><li><strong>等待部署：</strong> 点击部署，几分钟后即可通过 <a target="_blank" rel="noopener" href="https://tianyuxbear-github-io.pages.dev/">https://tianyuxbear-github-io.pages.dev/</a> 访问。</li></ol><h2 id="6-3-部署至-Vercel-灾备"><a href="#6-3-部署至-Vercel-灾备" class="headerlink" title="6.3 部署至 Vercel (灾备)"></a>6.3 部署至 Vercel (灾备)</h2><p>配置逻辑同上。Vercel 的国内访问速度在部分地区可能优于 Cloudflare，可作为互补。</p><ul><li><strong>Framework Preset:</strong> <code>Other</code>。</li><li><strong>Output Directory:</strong> <code>/</code>。</li></ul><p>部署成功后，即可通过 <a target="_blank" rel="noopener" href="https://tianyuxbear-github-io.vercel.app/">https://tianyuxbear-github-io.vercel.app/</a> 访问。</p><h2 id="6-4-自定义域名配置-重要"><a href="#6-4-自定义域名配置-重要" class="headerlink" title="6.4 自定义域名配置 (重要)"></a>6.4 自定义域名配置 (重要)</h2><p>为了获得最佳的访问速度和 HTTPS 支持，我们采用 <strong>DNS 托管模式</strong> 将域名完全接入 Cloudflare。</p><p><strong>第一步：域名注册 (以阿里云为例)</strong></p><ol><li>在阿里云官网购买域名（如 <code>codebearjourney.top</code>）。</li><li>完成实名认证。</li></ol><p><strong>第二步：DNS 迁移至 Cloudflare</strong> 这是加速的关键步骤。将域名的 DNS 解析权交给 Cloudflare，利用其全球 Anycast 网络。</p><ol><li>登录 Cloudflare Dashboard，点击 “Add a Site”，输入你的域名。</li><li>选择 “Free” 计划。</li><li>Cloudflare 会扫描当前的 DNS 记录，确认无误后点击 Continue。</li><li><strong>修改 Nameservers：</strong><ul><li>Cloudflare 会提供两个 Nameserver 地址（如 <code>bob.ns.cloudflare.com</code> 等）。</li><li>回到阿里云域名控制台 -&gt; 域名列表 -&gt; 管理 -&gt; DNS 修改 -&gt; 修改 DNS 服务器。</li><li>将阿里云默认的 DNS 修改为 Cloudflare 提供的这两个地址。</li></ul></li><li>等待生效（通常在 10 分钟到 24 小时内）。</li></ol><p><strong>第三步：绑定 Pages</strong></p><ol><li>在 Cloudflare Pages 项目页面，点击 “Custom domains”。</li><li>输入 <code>codebearjourney.top</code>。</li><li>由于你的 DNS 已经托管在 Cloudflare，系统会自动添加 CNAME 记录并申请 SSL 证书。</li><li>(可选) 同时添加 <code>www.codebearjourney.top</code> 并设置重定向，符合用户习惯。</li></ol><p>通过此配置，访问请求路径为： <code>用户</code> -&gt; <code>Cloudflare 边缘节点 (DNS+CDN)</code> -&gt; <code>Pages 静态资源</code>。</p><h1 id="7-SEO-与收录优化"><a href="#7-SEO-与收录优化" class="headerlink" title="7. SEO 与收录优化"></a>7. SEO 与收录优化</h1><p>为了让 Google 和 Bing 快速索引，我们需要配置 Sitemap 并完成站长验证。</p><h2 id="7-1-生成-Sitemap"><a href="#7-1-生成-Sitemap" class="headerlink" title="7.1 生成 Sitemap"></a>7.1 生成 Sitemap</h2><p>告诉搜索引擎你的网站结构和文章路径。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 npm 安装 Hexo-sitemap 插件</span><br>npm install hexo-generator-sitemap --save<br></code></pre></td></tr></table></figure><p>在 <code>_config.yml</code> 确认开启：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 确保 sitemap 插件已启用</span><br><span class="hljs-attr">sitemap:</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">sitemap.xml</span><br></code></pre></td></tr></table></figure><h2 id="7-2-站长平台验证-DNS-方式"><a href="#7-2-站长平台验证-DNS-方式" class="headerlink" title="7.2 站长平台验证 (DNS 方式)"></a>7.2 站长平台验证 (DNS 方式)</h2><p>传统的验证方式是上传一个 HTML 文件到 <code>public 目录</code>，这会污染源码且容易在重构中丢失。<strong>强烈推荐使用 Cloudflare DNS 进行 TXT 记录验证</strong>，这种方式无代码侵入，且得益于 Cloudflare 的生效速度，通常秒级通过。</p><p><strong>Google Search Console</strong></p><ol><li><strong>获取验证码：</strong><ul><li>登录 <a target="_blank" rel="noopener" href="https://search.google.com/search-console">Google Search Console</a>。</li><li>在左上角选择资源类型时，选择 <strong>“网域” (Domain)</strong>（而不是 “网址前缀”）。</li><li>输入你的域名（不带 https，如 <code>codebearjourney.top</code>）。</li><li>系统会弹出一个对话框，复制显示的 <strong>TXT 记录值</strong>（通常以 <code>google-site-verification=</code> 开头）。</li></ul></li><li><strong>Cloudflare 配置：</strong><ul><li><p>登录 Cloudflare Dashboard，进入你的域名页面。</p></li><li><p>点击左侧菜单 <strong>DNS -&gt; Records</strong>。</p></li><li><p>点击 <strong>Add record</strong> 按钮：</p><ul><li><strong>Type:</strong> 选择 <code>TXT</code></li><li><strong>Name:</strong> 输入 <code>@</code> (代表根域名)</li><li><strong>Content:</strong> 粘贴刚才复制的 <code>google-site-verification=...</code> 字符串</li><li><strong>TTL:</strong> 保持 <code>Auto</code></li></ul></li><li><p>点击 <strong>Save</strong>。</p></li></ul></li><li><strong>完成验证：</strong><ul><li>回到 Google Search Console 页面，点击 <strong>验证</strong> 按钮。通常会立即提示“已验证所有权”。</li></ul></li></ol><p><strong>Bing Webmaster Tools</strong><br>微软提供了一个极其高效的“偷懒”路径：</p><ol><li>登录 <a target="_blank" rel="noopener" href="https://www.bing.com/webmasters/about">Bing Webmaster Tools</a>。</li><li>选择 “<strong>Import from Google Search Console</strong>“（从 GSC 导入）。</li><li>授权你的 Google 账号，Bing 会自动同步你的站点验证状态和 Sitemap 地址，无需再手动添加 DNS 记录。</li></ol><h2 id="7-3-提交-Sitemap"><a href="#7-3-提交-Sitemap" class="headerlink" title="7.3 提交 Sitemap"></a>7.3 提交 Sitemap</h2><p>验证通过后，别忘了最后一步：</p><ol><li>确认 <code>https://codebearjourney.top/sitemap.xml</code> 可以访问。</li><li>在 Google&#x2F;Bing 后台的 <strong>Sitemaps</strong> 菜单中，填入 <code>sitemap.xml</code> 并提交。</li></ol><h1 id="8-多端同步工作流"><a href="#8-多端同步工作流" class="headerlink" title="8. 多端同步工作流"></a>8. 多端同步工作流</h1><p>由于采用了 Submodule 和标准化的 npm 依赖管理，在新设备上恢复工作流极其简单：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 克隆主仓库</span><br>git <span class="hljs-built_in">clone</span> git@github.com:tianyuxbear/hexo-blog.git<br><span class="hljs-built_in">cd</span> hexo-blog<br><br><span class="hljs-comment"># 2. 递归恢复子模块 (还原 fluid 主题)</span><br>git submodule update --init --recursive<br><br><span class="hljs-comment"># 3. 恢复插件依赖 (根据 package.json)</span><br>npm install<br></code></pre></td></tr></table></figure><p>至此，环境完全复刻，可以开始写作了。</p><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">Hexo官方文档</a> <a href="#fnref:1" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://hexo.fluid-dev.com/docs/">Hexo Fluid 用户手册</a> <a href="#fnref:2" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://hewei2001.pages.dev/Hello-My-World">Hello My World</a> <a href="#fnref:3" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://hewei2001.pages.dev/Hexo-Configuration#%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE">Hexo配置与扩展</a> <a href="#fnref:4" rev="footnote" class="footnote-backref">↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/" class="category-chain-item">配置指南</a> <span>></span> <a href="/categories/%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" class="category-chain-item">博客搭建</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Hexo/" class="print-no-link">#Hexo</a> <a href="/tags/Fluid/" class="print-no-link">#Fluid</a> <a href="/tags/CI-CD/" class="print-no-link">#CI/CD</a></div></div><div class="license-box my-3"><div class="license-title"><div>基于 Fluid 的高可用 Hexo 博客实践</div><div>https://codebearjourney.top/tutorials/hexo-fluid-guide</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Tianyu Xiong</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年12月24日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年12月25日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-cc-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-cc-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/hpc/cpu/omp-blas-thread-management" title="OpenMP / OpenBLAS 线程管理策略总结"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">OpenMP / OpenBLAS 线程管理策略总结</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"ERHqwxe8ZU5hOwBNfWwx7OMz-gzGzoHsz",appKey:"AQJ9A8QXO4raRfn9Nxv3ZmhF",path:"window.location.pathname",placeholder:"留下你的足迹吧 ٩(๑^o^๑)۶",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",(function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded((function(){Fluid.events.registerRefreshCallback((function(){"mermaid"in window&&mermaid.init()}))}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>